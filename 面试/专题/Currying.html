<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>柯里化</title>
</head>
<body>

</body>
<script src="jquery/js/jquery.2.1.4.js"></script>
<script type="text/javascript">

  $(function () {
    //
  })

  $(document).ready(function () {
    //DOM操作
  })
/*
  柯里化：在一个函数中首先填充几个参数，然后再返回一个新函数的技术;
  柯里化是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数
  而且返回结果的新函数的技术。使函数理解并处理部分应用
  柯里化具有：延迟计算，参数复用，动态生成函数的作用
  写一个puls函数，通过一下测试
  plus(0)===0;
  plus(1)(1)(2)(3)(5) == 12
  plus(1)(4)(2)(3) === 10
  方法引用：plus2 = plus(1)(1) plus2(1)(4)(2)(3) ===12
  */



function plus(num) {
  var adder = function () {
    debugger
    var _args = [];
    var _adder = function _adder() {
      debugger
      [].push.apply(_args, [].slice.call(arguments));
      return _adder;
    };

    _adder.toString = function () {
      debugger
      return _args.reduce(function (a, b) {
        return a + b;
      });
    }

    return _adder;
  }
  return adder()(num);
}
//
//var plus2=plus(2)(2)
//console.log(plus2(3)(4))
//console.log(plus(1)(2)(3)(4))


function sum(x) {
  var y = function (y) {
    return sum(x + y)
  }
  y.toString = y.valueOf = function () {
    return x;
  }
  return y
}
//var sum2=sum(2)(2)
//console.log(sum2(3)(4))
//console.log(sum(1)(2)(3)(4))

var currying = function(fn) {
  // fn 指官员消化老婆的手段
  var args = [].slice.call(arguments, 1);
  // args 指的是那个合法老婆
  return function() {
    // 已经有的老婆和新搞定的老婆们合成一体，方便控制
    var newArgs = args.concat([].slice.call(arguments));
    // 这些老婆们用 fn 这个手段消化利用，完成韦小宝前辈的壮举并返回
    return fn.apply(null, newArgs);
  };
};

// 下为官员如何搞定7个老婆的测试
// 获得合法老婆
var getWife = currying(function() {
  var allWife = [].slice.call(arguments);
  // allwife 就是所有的老婆的，包括暗渡陈仓进来的老婆
  console.log(allWife.join(";"));
}, "合法老婆");

// 获得其他6个老婆
getWife("大老婆","小老婆","俏老婆","刁蛮老婆","乖老婆","送上门老婆");

// 换一批老婆
getWife("超越韦小宝的老婆");


var addEvent = (function(){
  if (window.addEventListener) {
    return function(el, sType, fn, capture) {
      el.addEventListener(sType, function(e) {
        fn.call(el, e);
      }, (capture));
    };
  } else if (window.attachEvent) {
    return function(el, sType, fn, capture) {
      el.attachEvent("on" + sType, function(e) {
        fn.call(el, e);
      });
    };
  }
})();

</script>
</html>